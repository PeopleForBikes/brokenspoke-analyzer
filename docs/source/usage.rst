Usage
=====

Finding the OSM Relation ID
---------------------------

Several commands requires an OSM Relation ID. This number is an Open Street Map
attribute linking objects together, like for instance a polygon representing the
city boundaries and the city itself.

To find a relation ID, go to `openstreet map <https://www.openstreetmap.org>`_
and search for a specific city.

Then, on the bottom left of the page, a subsection name "Part of" will indicate
the relations. For instance for Flagstaff, one can read::

  Relation Flagstaff (110844) (as outer)

This is the number that must be passed to various commands.

Prepare
-------

The ``prepare`` subcommand is in charge of collecting and preparing the files
required to run an analysis.

Usage
^^^^^

.. program:: bna

.. option:: bna prepare STATE CITY OSM_RELATION_ID [OUTPUT_DIR]

- **STATE**: the full name of the state (e.g "arizona", "new mexico"). It is
  case insensitive and must be quoted if there are spaces.
- **CITY**: the full name of the city (e.g "flagstaff", "san antonio"). It is
  case insensitive and must be quoted if there are spaces.
- **OSM_RELATION_ID**: the number describing the relation between the polygon
  repesenting the city boundaries and the city itself.
- **OUTPUT_DIR**: the last parameter and is an optional path to indicate where
  to store the results on disk.

Example::

  bna prepare arizona flagstaff 110844

Analyze
-------

The ``analyze`` subcommand will comsume the artifacts being generated by the
``prepare`` subcommand and start an analysis.

Usage
^^^^^

.. program:: bna

.. option:: bna analyze STATE CITY CITY_SHP PFB_OSM_FILE [OUTPUT_DIR]

- **STATE**: the full name of the state (e.g "arizona", "new mexico"). It is
  case insensitive and must be quoted if there are spaces.
- **CITY**: the full name of the city (e.g "flagstaff", "san antonio"). It is
  case insensitive and must be quoted if there are spaces.
- **CITY_SHP**: the shapefile repesenting the city boundaries.
- **PFB_OSM_FILE**: the OSM file representing the city.
- **OUTPUT_DIR** is the last parameter and is an optional path to indicate where
  to store the results on disk.

Example::

  bna analyze arizona flagstaff flagstaff.shp flagstaff-arizona.osm

Run
---

The ``run`` subcommand is a combination of ``prepare`` and ``analyze``.

Usage
^^^^^

.. program:: bna

.. option:: bna run STATE CITY OSM_RELATION_ID [OUTPUT_DIR]

- **STATE**: the full name of the state (e.g "arizona", "new mexico"). It is
  case insensitive and must be quoted if there are spaces.
- **CITY**: the full name of the city (e.g "flagstaff", "san antonio"). It is
  case insensitive and must be quoted if there are spaces.
- **OSM_RELATION_ID**: the number describing the relation between the polygon
  repesenting the city boundaries and the city itself.
- **OUTPUT_DIR**: the last parameter and is an optional path to indicate where
  to store the results on disk.

Example::

  bna prepare arizona flagstaff 110844
